<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>스쿠버 다이빙 계산기</title>
  <style>
    body {
      background-color: white;
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      color: #222;
    }

    header {
      background-color: #005f73;
      color: white;
      padding: 1rem;
      text-align: center;
      font-size: 1.3rem;
    }

    .tabs {
      display: flex;
      background-color: #e0f7fa;
    }

    .tab {
      flex: 1;
      text-align: center;
      padding: 1rem;
      cursor: pointer;
      font-weight: bold;
      border-bottom: 3px solid transparent;
    }

    .tab.active {
      border-bottom: 3px solid #0077b6;
      background-color: #caf0f8;
    }

    .content {
      padding: 1rem;
      display: none;
    }

    .content.active {
      display: block;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
    }

    input {
      width: 100%;
      padding: 0.6rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    button {
      background-color: #0077b6;
      color: white;
      border: none;
      padding: 0.7rem 1.2rem;
      font-size: 1rem;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 1rem;
    }

    .result {
      margin-top: 1rem;
      font-size: 1.1rem;
      background: #f1f1f1;
      padding: 1rem;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <header>스쿠버 다이빙 계산기</header>

  <div class="tabs">
    <div class="tab active" onclick="showTab('rmv-single')">RMV (싱글)</div>
    <div class="tab" onclick="showTab('rmv-double')">RMV (더블)</div>
    <div class="tab" onclick="showTab('nitrox')">나이트록스</div>
    <div class="tab" onclick="showTab('trimix')">트라이믹스</div>
  </div>

  <!-- RMV 싱글 탭 -->
  <div id="rmv-single" class="content active">
    <div class="form-group">
      <label>입수 탱크압력 (bar)</label>
      <input type="number" id="rmv1_start" />
    </div>
    <div class="form-group">
      <label>출수 탱크압력 (bar)</label>
      <input type="number" id="rmv1_end" />
    </div>
    <div class="form-group">
      <label>평균수심 (m)</label>
      <input type="number" id="rmv1_depth" />
    </div>
    <div class="form-group">
      <label>다이빙 시간 (분)</label>
      <input type="number" id="rmv1_time" />
    </div>
    <button onclick="calcRMV('single')">계산하기</button>
    <div class="result" id="rmv1_result"></div>
  </div>

  <!-- RMV 더블 탭 -->
  <div id="rmv-double" class="content">
    <div class="form-group">
      <label>입수 탱크압력 (bar)</label>
      <input type="number" id="rmv2_start" />
    </div>
    <div class="form-group">
      <label>출수 탱크압력 (bar)</label>
      <input type="number" id="rmv2_end" />
    </div>
    <div class="form-group">
      <label>평균수심 (m)</label>
      <input type="number" id="rmv2_depth" />
    </div>
    <div class="form-group">
      <label>다이빙 시간 (분)</label>
      <input type="number" id="rmv2_time" />
    </div>
    <div class="form-group">
      <label>데코탱크 개수 (1~3)</label>
      <input type="number" id="rmv2_deco" min="0" max="3" />
    </div>
    <button onclick="calcRMV('double')">계산하기</button>
    <div class="result" id="rmv2_result"></div>
  </div>

  <!-- 나이트록스 -->
  <div id="nitrox" class="content">
    <p>🛠 준비 중입니다...</p>
  </div>

  <!-- 트라이믹스 -->
  <div id="trimix" class="content">
    <p>🛠 준비 중입니다...</p>
  </div>

  <script>
    // 탭 전환 처리
    function showTab(id) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.target.classList.add('active');
    }

    // RMV 계산 함수
    function calcRMV(type) {
      let start, end, depth, time, deco, tankVolume;
      if (type === 'single') {
        start = Number(document.getElementById('rmv1_start').value);
        end = Number(document.getElementById('rmv1_end').value);
        depth = Number(document.getElementById('rmv1_depth').value);
        time = Number(document.getElementById('rmv1_time').value);
        tankVolume = 11; // 싱글탱크
      } else {
        start = Number(document.getElementById('rmv2_start').value);
        end = Number(document.getElementById('rmv2_end').value);
        depth = Number(document.getElementById('rmv2_depth').value);
        time = Number(document.getElementById('rmv2_time').value);
        deco = Number(document.getElementById('rmv2_deco').value);
        if (deco < 0) deco = 0;
        if (deco > 3) deco = 3;
        tankVolume = 22 + (11 * deco); // 더블탱크 + 데코탱크
      }

      const usedBar = start - end;
      const ambientPressure = (depth / 10) + 1;
      const gasUsed = usedBar * tankVolume;
      const rmv = gasUsed / (ambientPressure * time);

      const result = `RMV = ${rmv.toFixed(1)} L/min`;
      const output = type === 'single' ? 'rmv1_result' : 'rmv2_result';
      document.getElementById(output).innerText = result;
    }
  </script>
</body>
</html>
